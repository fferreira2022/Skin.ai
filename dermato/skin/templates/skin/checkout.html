{% extends 'main.html' %}
{% block content %}
{% if request.user.is_authenticated %}
  <div class="card w-75 rounded-4" id="checkout_process">
      <div class="card-body">
          <div class="card-description text-center">
              <h3 class="text-white">Obtenez votre analyse pour seulement 1.80€ !</h3>
              <br><br>
              <a href=""id="checkout-button" class="btn btn-outline-light w-50">Procéder au paiement</a>
          </div>
          <script src="https://js.stripe.com/v3/"></script>
          <script>
            var stripe = Stripe('{{ STRIPE_PUBLIC_KEY }}');
            const checkout_button = document.querySelector('#checkout-button');
            checkout_button.addEventListener('click', event => {
              stripe.redirectToCheckout({ 
                sessionId: '{{session_id}}'
                }).then(function (result) {
              });
            });
          </script>
      </div>
  </div>
{% endif %}
{% endblock content %}